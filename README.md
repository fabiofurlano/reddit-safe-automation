# ü§ñ Reddit Safe Automation with AI

An intelligent, ethical Reddit automation system that uses **AI-generated comments** to build genuine karma and backlinks while respecting Reddit's community guidelines and safety policies.

## üìä Status

**Last Updated**: October 15, 2025  
**AI Engine**: z.ai GML-4.6  
**Status**: ‚úÖ **ACTIVE AND RUNNING**

---

## üèÑ Overview

This project automates Reddit engagement with **AI-powered, contextual comments** that provide genuine value to communities. Instead of generic templates or spam, every comment is uniquely generated by z.ai GML-4.6 to match the thread context.

### Key Features

‚úÖ **AI-Generated Comments** - Uses z.ai GML-4.6 for context-aware, natural responses  
‚úÖ **90/10 Safety Rule** - Enforces Reddit's engagement guidelines (90% value, 10% promotional max)  
‚úÖ **Rate Limiting** - Max 3 posts/week, 4+ hours between posts  
‚úÖ **Supabase Logging** - All actions tracked for analytics and debugging  
‚úÖ **Scheduled Automation** - Runs automatically at 09:00 and 21:00 UTC  
‚úÖ **Error Handling** - Comprehensive safety checks and fallbacks  
‚úÖ **Production-Ready** - Deployed on GitHub Actions with full monitoring  

---

## üîß Architecture

### Tech Stack
- **Language**: Python 3.11
- **Reddit API**: PRAW (Python Reddit API Wrapper)
- **AI Engine**: z.ai GML-4.6
- **Database**: Supabase (PostgreSQL)
- **Orchestration**: GitHub Actions (Cloud CI/CD)
- **Dependencies**: `praw`, `requests`

### Workflow

```
GitHub Actions (Scheduled)
        ‚Üì
[reddit_automation-with-ai.py]
        ‚Üì
  1. Authentication (Reddit + z.ai)
        ‚Üì
  2. Safety Checks (90/10 Rule + Rate Limits)
        ‚Üì
  3. Thread Search (Find relevant posts)
        ‚Üì
  4. AI Comment Generation (z.ai GML-4.6)
        ‚Üì
  5. Comment Posting (PRAW)
        ‚Üì
  6. Logging (Supabase)
```

---

## üöÄ Quick Start

### Prerequisites

```bash
pip install praw requests
```

### Environment Variables

Set these GitHub Secrets for automated runs:

```bash
# Reddit Credentials
REDDIT_CLIENT_ID=<your-client-id>
REDDIT_CLIENT_SECRET=<your-client-secret>
REDDIT_USERNAME=<your-username>
REDDIT_PASSWORD=<your-password>
REDDIT_USER_AGENT=<your-user-agent>

# z.ai API
ZAI_API_KEY=<your-z.ai-api-key>

# Supabase
SUPABASE_URL=<your-supabase-url>
SUPABASE_SERVICE_KEY=<your-service-key>

# Policy
LINK_POLICY=FOLLOW_UP_ONLY  # Only post link if user asks
```

### Local Testing

```bash
# Set environment variables
export REDDIT_CLIENT_ID="..."
export REDDIT_PASSWORD="..."
# ... etc

# Run the script
python reddit_automation-with-ai.py
```

---

## üìã How It Works

### 1Ô∏è‚É£ Safety Checks

#### 90/10 Rule Enforcement
```python
# Checks last 50 posts/comments
# Ensures no more than 10% contain promotional link
# Fails safely if ratio exceeded
```

#### Rate Limiting
```python
# Max 3 posts per week
# Minimum 4 hours between posts
# Prevents spam and bans
```

### 2Ô∏è‚É£ Thread Discovery

Searches for relevant threads using keywords:
- "restore old photo"
- "photo restoration help"
- "AI photo repair"
- "colorize old photo"
- "fix damaged photo"
- "enhance old picture"

Target subreddits:
- `r/PhotoEditingRequests`
- `r/AskPhotography`
- `r/OldPhotos`
- `r/Colorization`
- `r/restoration`
- `r/PhotoRepair`
- `r/pics`
- `r/Photography`

### 3Ô∏è‚É£ AI Comment Generation

For each thread, the system:

1. Extracts thread title, content, and subreddit
2. Sends context to **z.ai GML-4.6** API
3. Receives AI-generated, contextual comment (100-200 words)
4. Posts comment via PRAW
5. Logs to Supabase

---

## üìä Supabase Integration

### Database Table: `content_history`

All actions are logged to Supabase for monitoring and analytics:

```sql
CREATE TABLE content_history (
  id BIGINT PRIMARY KEY,
  platform TEXT,           -- 'reddit'
  action TEXT,             -- 'ai_comment_generated', 'reddit_comment', 'error', etc
  details JSONB,           -- Contextual data
  performed_at TIMESTAMP
);
```

### Log Examples

**AI Comment Generated:**
```json
{
  "action": "ai_comment_generated",
  "platform": "reddit",
  "details": {
    "model": "gml-4.6",
    "subreddit": "PhotoEditingRequests",
    "length": 187,
    "tokens_used": 234
  }
}
```

**Comment Posted:**
```json
{
  "action": "reddit_comment",
  "platform": "reddit",
  "details": {
    "subreddit": "PhotoEditingRequests",
    "thread_title": "How to restore my grandfather's photo?",
    "comment_url": "https://reddit.com/r/PhotoEditingRequests/comments/xxx/_/yyy",
    "policy": "FOLLOW_UP_ONLY"
  }
}
```

**Safety Check Triggered:**
```json
{
  "action": "ninety_ten_skip",
  "platform": "reddit",
  "details": {
    "reason": "safety_rule_triggered",
    "promotional_ratio": 0.15
  }
}
```

---

## üîÑ GitHub Actions Workflow

### Schedule
- **09:00 UTC** - Morning run
- **21:00 UTC** - Evening run

### Manual Trigger
Go to GitHub Actions ‚Üí Reddit Safe Automation ‚Üí Run workflow

---

## üõ°Ô∏è Safety Guardrails

### Rate Limiting
- Max **3 posts per week**
- Min **4 hours between posts**

### 90/10 Rule
- Max **10% promotional content**
- Minimum **10 posts/comments** to check

### Link Policy
- **FOLLOW_UP_ONLY** - Never post unsolicited links
- Only include website if user asks "how"

---

## üìù Files

- `reddit_automation-with-ai.py` - Main automation script with AI integration
- `.github/workflows/reddit-automation.yml` - GitHub Actions workflow
- `README.md` - This documentation

---

## üîç Monitoring

### View Logs
1. **GitHub Actions**: https://github.com/fabiofurlano/reddit-safe-automation/actions
2. **Supabase**: Query `content_history` table

### Query Supabase
```sql
SELECT * FROM content_history 
WHERE platform = 'reddit' 
ORDER BY performed_at DESC 
LIMIT 50;
```

---

## ‚ö†Ô∏è Disclaimer

This tool is designed to follow Reddit's community guidelines. Users are responsible for compliance with:
- Reddit's Terms of Service
- Community Guidelines
- Anti-spam policies
- Platform-specific rules

---

**Status**: ‚úÖ Production Ready  
**Last Run**: Successfully executed with AI-generated comments  
**Next Run**: Scheduled for next UTC cycle (09:00 or 21:00)
